<div class="container mt-58" *ngIf="estate">

  <div class="row">
    <h1 class="my-4 col-8">Starting price:
      <small><span class="blue">${{estate.price}}</span> per meter.</small>
    </h1>

    <div class="col-md-8">
      <img class="img-fluid" src="{{estate.coverImage.url}}" alt="">
    </div>

    <div class="col-md-4">
      <h3 class="my-3">Estate Description</h3>
      <p>{{estate.additionalInfo}}</p>

      <h3 class="my-3">Estate Details</h3>
      <ul>
        <li class="text-capitalize">For {{estate.action}}.</li>
        <li>Of type {{estate.type}}.</li>
        <li>Located at {{estate.city}}.</li>
        <li>With area {{estate.area}} m2.</li>
        <li>Cost ${{estate.price * estate.area}}.</li>
        <li *ngIf="estate?.author">Published from
          <a class="text-capitalize" routerLink="/users/{{estate.author.id}}">
            {{estate.author.firstName + ' ' + estate.author.lastName}}
          </a>
        </li>
        <li *ngIf="estate.lastBid === 0">Be the first to place a bid!</li>
        <li *ngIf="estate.lastBid !== 0">Last bid <span class="red">${{estate.lastBid}}</span> per m2.</li>
      </ul>

      <form (ngSubmit)="placeBid()" #bidForm="ngForm" *ngIf="isLoggedIn()">
        <h3 class="my-3">Place a bit from here</h3>

        <div class="row">
          <input id="price" type="number" step="0.01" class="form-control col-7 ml-3" required #price="ngModel"
                 placeholder="Price Per Meter" [(ngModel)]="bidRequestModel.price" name="price"
                 [min]="estate.lastBid === 0 ? estate.price + 1 : estate.lastBid + 1">
          <input type="submit" class="form-control col-3" [disabled]="bidForm.form.invalid">

          <div [hidden]="price.valid || price.pristine" class="invalid-feedback">
            Bid value must be greather than the last one or the starting price.
          </div>
        </div>
      </form>

    </div>

  </div>

  <div class="container row" *ngIf="hasAuthorities">
    <button class="btn btn-warning col-2" (click)="onEditEstate()">Edit</button>
    <button class="btn btn-danger col-2 ml-2" (click)="onDeleteEstate()">Delete</button>
  </div>

  <h3 class="my-4">More Images</h3>

  <div class="row">
    <div class="col-md-3 col-sm-6 mb-4" *ngFor="let image of estate.images">
      <img class="img-fluid" src="{{image.url}}" alt="image">
    </div>
  </div>
</div>
